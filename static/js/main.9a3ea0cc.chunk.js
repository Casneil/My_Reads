(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(42)},31:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),s=a(12),l=(a(31),a(4)),i=a.n(l),u=a(7),d=a(15),m=a(9),f="https://reactnd-books-api.udacity.com",h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:h},p=function(){return fetch("".concat(f,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books})},v=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},E=function(e){var t=function(){var t=Object(u.a)(i.a.mark(function t(a){var n,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,r=e,t.next=4,v(r,n);case 4:o=t.sent,e.reorder(r,n,o);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:195,height:200,backgroundImage:"url(".concat(e.imageLinks?e.imageLinks.thumbnail:e.previewLink,")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{onChange:t,value:e.shelf},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},e.title),r.a.createElement("div",{className:"book-authors"},e.authors?e.authors[0]:e.publisher)))},k=a(6),g=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)([]),l=Object(d.a)(s,2),h=l[0],v=l[1],g=function(){var t=Object(u.a)(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:a=t.sent,e.add(a);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();console.log(h),Object(n.useEffect)(function(){try{g()}catch(e){console.err(e)}},[]);var y=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,c(a),e.prev=2,!a){e.next=10;break}return e.next=6,r=a,fetch("".concat(f,"/search"),{method:"POST",headers:Object(m.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:r})}).then(function(e){return e.json()}).then(function(e){return e.books});case 6:n=e.sent,v(n),e.next=11;break;case 10:v([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}var r},e,null,[[2,13]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(k.b,{to:"/"},r.a.createElement("button",{className:"close-search"},"Close")),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:y,value:o}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},h.length>=1&&h.map(function(t){var a=e.books.find(function(e){return e.id===t.id});return t.shelf=a?a.shelf:"none",r.a.createElement(E,Object.assign({key:t.id},t,{reorder:e.reorder}))}))))},y=function(e){return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},e.title),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},e.books?e.books.map(function(t){return r.a.createElement(E,Object.assign({key:t.id},t,{reorder:e.reorder}))}):r.a.createElement("h1",null,"No Books found"))))},j=function(){return r.a.createElement("div",{className:"open-search"},r.a.createElement("div",null,r.a.createElement(k.b,{to:"/search"},r.a.createElement("button",null,"Add books"))))},N=function(e){var t=function(){var t=Object(u.a)(i.a.mark(function t(a){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n=t.sent,e.add(n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)(function(){try{t()}catch(e){console.err(e)}},[]),r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,r.a.createElement(y,{title:"Currently Reading",books:e.currentlyReading,reorder:e.reorder}),r.a.createElement(y,{title:"Want to Read",books:e.wantToRead,reorder:e.reorder}),r.a.createElement(y,{title:"Read",books:e.read,reorder:e.reorder})),r.a.createElement("div",null,r.a.createElement(j,null))))},O=a(21),w=a(22),R=a(24),x=a(23),C=a(25),S=Object(n.createContext)(),T=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(R.a)(this,Object(x.a)(t).call(this))).reorder=function(e,t,n){if("none"===t){var r=a.state.books.filter(function(t){return t.id!==e.id});a.add(r)}else{var o=a.state.books.map(function(e){return n[t].find(function(t){return t===e.id})&&(e.shelf=t),e});a.add(o)}},a.add=function(e){var t=e.filter(function(e){return"wantToRead"===e.shelf}),n=e.filter(function(e){return"read"===e.shelf}),r=e.filter(function(e){return"currentlyReading"===e.shelf});a.setState({wantToRead:t,books:e,read:n,currentlyReading:r})},a.state={books:[],read:[],wantToRead:[],currentlyReading:[]},a}return Object(C.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=Object(m.a)({},this.state,{add:this.add,reorder:this.reorder});return r.a.createElement(S.Provider,{value:Object(m.a)({},e)},this.props.children)}}]),t}(n.Component),J=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(T,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",render:function(){return r.a.createElement(S.Consumer,null,function(e){return r.a.createElement(N,e)})}}),r.a.createElement(s.a,{exact:!0,path:"/search",render:function(){return r.a.createElement(S.Consumer,null,function(e){return r.a.createElement(g,e)})}}))))};a(40);c.a.render(r.a.createElement(k.a,null,r.a.createElement(J,null)),document.getElementById("root"))}},[[26,2,1]]]);
//# sourceMappingURL=main.9a3ea0cc.chunk.js.map